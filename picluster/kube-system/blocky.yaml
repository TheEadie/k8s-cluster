apiVersion: helm.fluxcd.io/v1
kind: HelmRelease
metadata:
  name: blocky
  namespace: kube-system
spec:
  releaseName: blocky
  chart:
    repository: https://billimek.com/billimek-charts/
    name: blocky
    version: 3.3.1
  values:
    config:
      customDNS:
        mapping:
          test.pi.lan: 192.168.1.240
          grafana.pi.lan: 192.168.1.240
      blocking:
        blackLists:
          ads:
            - https://raw.githubusercontent.com/ookangzheng/dbl-oisd-nl/master/dblzero.txt
        clientGroupsBlock:
          default:
            - ads
    serviceTCP:
      enabled: true
      type: LoadBalancer
      externalTrafficPolicy: Local
      loadBalancerIP: 192.168.1.241
      annotations:
        metallb.universe.tf/address-pool: network
        metallb.universe.tf/allow-shared-ip: blocky-svc
    serviceUDP:
      enabled: true
      type: LoadBalancer
      externalTrafficPolicy: Local
      loadBalancerIP: 192.168.1.241
      annotations:
        metallb.universe.tf/address-pool: network
        metallb.universe.tf/allow-shared-ip: blocky-svc